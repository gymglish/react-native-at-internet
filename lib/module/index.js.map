{"version":3,"sources":["index.tsx"],"names":["NativeModules","NativeEventEmitter","Platform","Events","ePrivacyVisitorMode","ePrivacyStorageFeature","AtInternet","sanitizeIOSMode","string","OS","charAt","toLowerCase","slice","Module","EventEmitter","SalesInsights","Products","add","salesProductsAdd","remove","salesProductsRemove","display","products","Array","isArray","salesProductsDisplay","displayPage","salesProductsDisplayPage","Cart","salesCartDisplay","update","salesCartUpdate","delivery","salesCartDelivery","payment","salesCartPayment","awaitingPayments","cart","shipping","transaction","salesCartAwaitingPayments","Transaction","confirmation","salesTransactionConfirmation","Privacy","VisitorMode","StorageFeature","setVisitorOptout","newMode","setPrivacyVisitorOptout","toUpperCase","setVisitorOptIn","setPrivacyVisitorOptin","extendIncludeBuffer","mode","keys","map","extendIncludeStorage","features","getVisitorMode","getPrivacyVisitorMode","setVisitorMode","parameters","setPrivacyVisitorMode"],"mappings":"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","sourcesContent":["import {\n  NativeModules,\n  NativeEventEmitter,\n  EmitterSubscription,\n  NativeModulesStatic,\n  EventSubscriptionVendor,\n  Platform,\n} from 'react-native';\n\ninterface HitParameters {\n  name: string;\n  chapter1?: string;\n  chapter2?: string;\n  chapter3?: string;\n  level2?: number;\n  customObject?: string;\n}\n\nexport enum Events {\n  trackerNeedsFirstLaunchApproval = 'trackerNeedsFirstLaunchApproval',\n  buildDidEnd = 'buildDidEnd',\n  sendDidEnd = 'sendDidEnd',\n  didCallPartner = 'didCallPartner',\n  warningDidOccur = 'warningDidOccur',\n  saveDidEnd = 'saveDidEnd',\n  errorDidOccur = 'errorDidOccur',\n}\n\ntype AtInternetEventEmitter = {\n  addListener(\n    eventType: Events.trackerNeedsFirstLaunchApproval,\n    listener: (body: { message: string }) => any,\n    context?: any\n  ): EmitterSubscription;\n  addListener(\n    eventType: Events.buildDidEnd,\n    listener: (body: { message: string; status: number }) => any,\n    context?: any\n  ): EmitterSubscription;\n  addListener(\n    eventType: Events.sendDidEnd,\n    listener: (body: { message: string; status: number }) => any,\n    context?: any\n  ): EmitterSubscription;\n  addListener(\n    eventType: Events.didCallPartner,\n    listener: (body: { response: string }) => any,\n    context?: any\n  ): EmitterSubscription;\n  addListener(\n    eventType: Events.warningDidOccur,\n    listener: (body: { message: string }) => any,\n    context?: any\n  ): EmitterSubscription;\n  addListener(\n    eventType: Events.saveDidEnd,\n    listener: (body: { message: string }) => any,\n    context?: any\n  ): EmitterSubscription;\n  addListener(\n    eventType: Events.errorDidOccur,\n    listener: (body: { message: string }) => any,\n    context?: any\n  ): EmitterSubscription;\n};\n\ntype PrivacyVisitorMode = 'OptOut' | 'OptIn' | 'Exempt' | 'NoConsent' | 'None';\nenum ePrivacyVisitorMode {\n  OptOut = 'OptOut',\n  OptIn = 'OptIn',\n  Exempt = 'Exempt',\n  NoConsent = 'NoConsent',\n  None = 'None',\n}\ntype PrivacyStorageFeature =\n  | 'Campaign'\n  | 'UserId'\n  | 'Privacy'\n  | 'IdentifiedVisitor'\n  | 'Crash'\n  | 'Lifecycle';\nenum ePrivacyStorageFeature {\n  Campaign = 'Campaign',\n  UserId = 'UserId',\n  Privacy = 'Privacy',\n  IdentifiedVisitor = 'IdentifiedVisitor',\n  Crash = 'Crash',\n  Lifecycle = 'Lifecycle',\n}\n\nexport interface ECommerceProduct {\n  id: string;\n  variant?: string;\n  article?: string;\n  placement?: string;\n  promocode?: string;\n  $?: string;\n  brand?: string;\n  discount?: boolean;\n  pricetaxincluded?: number;\n  pricetaxfree?: number;\n  stock?: boolean;\n  category1?: string;\n  category2?: string;\n  category3?: string;\n  category4?: string;\n  category5?: string;\n  category6?: string;\n}\n\nexport interface ECommerceCart {\n  id: string;\n  currency?: string;\n  turnovertaxincluded?: number;\n  turnovertaxfree?: number;\n  quantity?: number;\n  nbdistinctproduct?: number;\n  creation_utc?: number;\n}\n\nexport interface ECommerceShipping {\n  delivery?: string;\n  costtaxincluded?: number;\n  costtaxfree?: number;\n}\n\nexport interface ECommercePayment {\n  mode?: string;\n}\n\ninterface ECommerceTransaction {\n  id: string;\n  status?: string;\n  promocode?: [string];\n  firstpurchase?: boolean;\n}\n\ntype AtInternetType = {\n  // START Configuration native methods\n  setLevel2(level2: number): Promise<true>;\n  setConfigString(key: string, value: string | null): Promise<true>;\n  setConfigBoolean(key: string, value: boolean | null): Promise<true>;\n  setConfigInteger(key: string, value: number | null): Promise<true>;\n  setConfigDouble(key: string, value: number | null): Promise<true>;\n\n  setParamString(key: string, value: string | null): Promise<true>;\n  setParamBoolean(key: string, value: boolean | null): Promise<true>;\n  setParamInteger(key: string, value: number | null): Promise<true>;\n  setParamDouble(key: string, value: number | null): Promise<true>;\n\n  setProp(key: string, value: string, persistent: boolean): Promise<true>;\n  // END Configuration native methods\n\n  // START Visitor native methods\n  visitor(visitorId: string, visitorCategory: string | null): Promise<true>;\n  unsetVisitor(): Promise<true>;\n  // END Visitor native methods\n\n  // START Events native methods\n  screen(parameters: HitParameters): Promise<true>;\n  navigation(parameters: HitParameters): Promise<true>;\n  download(parameters: HitParameters): Promise<true>;\n  exit(parameters: HitParameters): Promise<true>;\n  touch(parameters: HitParameters): Promise<true>;\n  search(parameters: HitParameters): Promise<true>;\n  // END Events native methods\n\n  // START Privacy native methods\n  setPrivacyVisitorOptout(): Promise<PrivacyVisitorMode>;\n  setPrivacyVisitorOptin(): Promise<PrivacyVisitorMode>;\n  setPrivacyVisitorMode(\n    mode: string,\n    parameters:\n      | { duration?: number }\n      | {\n          duration?: number;\n          visitorConsent: boolean;\n          customUserIdValue?: string;\n        }\n  ): Promise<PrivacyVisitorMode>;\n  getPrivacyVisitorMode(): Promise<PrivacyVisitorMode>;\n  extendIncludeBuffer(\n    mode: PrivacyVisitorMode | string,\n    keys: string[]\n  ): Promise<true>;\n  extendIncludeStorage(\n    mode: PrivacyVisitorMode | string,\n    feature: PrivacyStorageFeature[]\n  ): Promise<true>;\n\n  enableListeners(): Promise<true>;\n  disableListeners(): Promise<true>;\n  // END Privacy native methods\n\n  // START ECommerce native methods\n  salesProductsDisplay(products: ECommerceProduct[]): Promise<true>;\n  salesProductsDisplayPage(product: ECommerceProduct): Promise<true>;\n  salesProductsAdd(\n    cart: Pick<ECommerceCart, 'id'>,\n    product: ECommerceProduct\n  ): Promise<true>;\n  salesProductsRemove(\n    cart: Pick<ECommerceCart, 'id'>,\n    product: ECommerceProduct\n  ): Promise<true>;\n  salesCartDisplay(cart: ECommerceCart): Promise<true>;\n  salesCartUpdate(cart: ECommerceCart): Promise<true>;\n  salesCartDelivery(\n    cart: ECommerceCart,\n    shipping: ECommerceShipping\n  ): Promise<true>;\n  salesCartPayment(\n    cart: ECommerceCart,\n    shipping: ECommerceShipping\n  ): Promise<true>;\n  salesCartAwaitingPayments(\n    cart: ECommerceCart,\n    shipping: ECommerceShipping,\n    payment: ECommercePayment,\n    transaction: ECommerceTransaction,\n    products: ECommerceProduct[]\n  ): Promise<true>;\n  salesTransactionConfirmation(\n    cart: ECommerceCart,\n    shipping: ECommerceShipping,\n    payment: ECommercePayment,\n    transaction: ECommerceTransaction,\n    products: ECommerceProduct[]\n  ): Promise<true>;\n  // END ECommerce native methods\n\n  Privacy: {\n    VisitorMode: typeof ePrivacyVisitorMode;\n    StorageFeature: typeof ePrivacyStorageFeature;\n    setVisitorOptout(): Promise<PrivacyVisitorMode>;\n    setVisitorOptIn(): Promise<PrivacyVisitorMode>;\n    setVisitorMode(\n      mode: string,\n      parameters?:\n        | { duration?: number }\n        | {\n            duration?: number;\n            visitorConsent: boolean;\n            customUserIdValue?: string;\n          }\n    ): Promise<PrivacyVisitorMode>;\n    getVisitorMode(): Promise<PrivacyVisitorMode>;\n    extendIncludeBuffer(mode: string, ...keys: string[]): Promise<true>;\n    extendIncludeStorage(\n      mode: string,\n      ...feature: PrivacyStorageFeature[]\n    ): Promise<true>;\n  };\n\n  SalesInsights: {\n    Products: {\n      display: (\n        ...products: ECommerceProduct[] | [ECommerceProduct[]]\n      ) => Promise<true>;\n      displayPage(product: ECommerceProduct): Promise<true>;\n      add(\n        cart: Pick<ECommerceCart, 'id'>,\n        product: ECommerceProduct\n      ): Promise<true>;\n      remove(\n        cart: Pick<ECommerceCart, 'id'>,\n        product: ECommerceProduct\n      ): Promise<true>;\n    };\n    Cart: {\n      display(cart: ECommerceCart): Promise<true>;\n      update(cart: ECommerceCart): Promise<true>;\n      delivery(cart: ECommerceCart, shipping: ECommerceShipping): Promise<true>;\n      payment(cart: ECommerceCart, shipping: ECommerceShipping): Promise<true>;\n      awaitingPayments: (\n        cart: ECommerceCart,\n        shipping: ECommerceShipping,\n        payment: ECommercePayment,\n        transaction: ECommerceTransaction,\n        ...products: ECommerceProduct[] | [ECommerceProduct[]]\n      ) => Promise<true>;\n    };\n    Transaction: {\n      confirmation: (\n        cart: ECommerceCart,\n        shipping: ECommerceShipping,\n        payment: ECommercePayment,\n        transaction: ECommerceTransaction,\n        ...products: ECommerceProduct[] | [ECommerceProduct[]]\n      ) => Promise<true>;\n    };\n  };\n\n  Events: typeof Events;\n  EventEmitter: Omit<NativeEventEmitter, 'addListener'> &\n    AtInternetEventEmitter;\n};\n\nconst { AtInternet } = NativeModules as NativeModulesStatic & {\n  AtInternet: AtInternetType & EventSubscriptionVendor;\n};\n\nconst sanitizeIOSMode = (string: string) => {\n  if (Platform.OS === 'ios') {\n    return `${string.charAt(0).toLowerCase()}${string.slice(1)}`;\n  } else {\n    return string;\n  }\n};\n\nconst Module = AtInternet as Omit<\n  AtInternetType,\n  | 'setPrivacyVisitorOptout'\n  | 'setPrivacyVisitorOptin'\n  | 'setPrivacyVisitorMode'\n  | 'getPrivacyVisitorMode'\n  | 'extendIncludeBuffer'\n  | 'extendIncludeStorage'\n  | 'salesProductsAdd'\n  | 'salesProductsDisplay'\n  | 'salesProductsDisplayPage'\n  | 'salesProductsRemove'\n  | 'salesCartAwaitingPayments'\n  | 'salesCartDelivery'\n  | 'salesCartDisplay'\n  | 'salesCartPayment'\n  | 'salesCartUpdate'\n  | 'salesTransactionConfirmation'\n>;\nModule.EventEmitter = new NativeEventEmitter(AtInternet);\nModule.Events = Events;\nModule.SalesInsights = {\n  Products: {\n    add: AtInternet.salesProductsAdd,\n    remove: AtInternet.salesProductsRemove,\n    display: (...products: ECommerceProduct[] | [ECommerceProduct[]]) => {\n      if (products[0] && Array.isArray(products[0])) {\n        return AtInternet.salesProductsDisplay(\n          products[0] as ECommerceProduct[]\n        );\n      } else {\n        return AtInternet.salesProductsDisplay(products as ECommerceProduct[]);\n      }\n    },\n    displayPage: AtInternet.salesProductsDisplayPage,\n  },\n  Cart: {\n    display: AtInternet.salesCartDisplay,\n    update: AtInternet.salesCartUpdate,\n    delivery: AtInternet.salesCartDelivery,\n    payment: AtInternet.salesCartPayment,\n    awaitingPayments: (\n      cart: ECommerceCart,\n      shipping: ECommerceShipping,\n      payment: ECommercePayment,\n      transaction: ECommerceTransaction,\n      ...products: ECommerceProduct[] | [ECommerceProduct[]]\n    ) => {\n      if (products[0] && Array.isArray(products[0])) {\n        return AtInternet.salesCartAwaitingPayments(\n          cart,\n          shipping,\n          payment,\n          transaction,\n          products[0] as ECommerceProduct[]\n        );\n      } else {\n        return AtInternet.salesCartAwaitingPayments(\n          cart,\n          shipping,\n          payment,\n          transaction,\n          products as ECommerceProduct[]\n        );\n      }\n    },\n  },\n  Transaction: {\n    confirmation: (\n      cart: ECommerceCart,\n      shipping: ECommerceShipping,\n      payment: ECommercePayment,\n      transaction: ECommerceTransaction,\n      ...products: ECommerceProduct[] | [ECommerceProduct[]]\n    ) => {\n      if (products[0] && Array.isArray(products[0])) {\n        return AtInternet.salesTransactionConfirmation(\n          cart,\n          shipping,\n          payment,\n          transaction,\n          products[0] as ECommerceProduct[]\n        );\n      } else {\n        return AtInternet.salesTransactionConfirmation(\n          cart,\n          shipping,\n          payment,\n          transaction,\n          products as ECommerceProduct[]\n        );\n      }\n    },\n  },\n};\nModule.Privacy = {\n  VisitorMode: ePrivacyVisitorMode,\n  StorageFeature: ePrivacyStorageFeature,\n  setVisitorOptout: async () => {\n    const newMode = await AtInternet.setPrivacyVisitorOptout();\n    return (newMode.charAt(0).toUpperCase() +\n      newMode.slice(1)) as PrivacyVisitorMode;\n  },\n  setVisitorOptIn: async () => {\n    const newMode = await AtInternet.setPrivacyVisitorOptin();\n    return (newMode.charAt(0).toUpperCase() +\n      newMode.slice(1)) as PrivacyVisitorMode;\n  },\n  extendIncludeBuffer: (mode: PrivacyVisitorMode, ...keys) =>\n    AtInternet.extendIncludeBuffer(\n      sanitizeIOSMode(mode),\n      keys.map(sanitizeIOSMode)\n    ),\n  extendIncludeStorage: (\n    mode: PrivacyVisitorMode,\n    ...features: PrivacyStorageFeature[]\n  ) =>\n    AtInternet.extendIncludeStorage(\n      sanitizeIOSMode(mode),\n      features.map(sanitizeIOSMode) as PrivacyStorageFeature[]\n    ),\n  getVisitorMode: async () => {\n    const mode = await AtInternet.getPrivacyVisitorMode();\n    return (mode.charAt(0).toUpperCase() + mode.slice(1)) as PrivacyVisitorMode;\n  },\n  setVisitorMode: async (mode, parameters = {}) => {\n    const newMode = await AtInternet.setPrivacyVisitorMode(\n      sanitizeIOSMode(mode),\n      parameters\n    );\n    return (newMode.charAt(0).toUpperCase() +\n      newMode.slice(1)) as PrivacyVisitorMode;\n  },\n};\n\nexport default Module;\n"]}